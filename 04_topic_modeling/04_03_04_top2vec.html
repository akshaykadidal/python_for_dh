
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>1.7. Top2Vec in Python &#8212; Introduction to Python for Humanists</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. Text Analysis with BookNLP" href="../08_booknlp/01_01_intro.html" />
    <link rel="prev" title="1.6. Transformer Models" href="04_03_03_embedding_clustering.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/chapman-logo.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Introduction to Python for Humanists</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    <p align="center">INTRODUCTION TO PYTHON FOR HUMANISTS</p>
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  PREFACE
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00_preface/00_01_preface.html">
   Preface
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  PART ONE: The Basics of Python
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01_intro/01_01-01_intro.html">
   1. Introduction to Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_01-02_introduction_to_python.html">
     1.1. Introduction to Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_01-03_installing_python.html">
     1.2. Installing Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_01-04_coding_basics.html">
     1.3. Coding Basics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01_intro/01_02-01_intro.html">
   2. Data and Data Structures
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_02-02_data.html">
     2.1. Introduction to Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_02-03_data_structures.html">
     2.2. Introduction to Data Structures
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01_intro/01_03-01_intro.html">
   3. Loops and Logic
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_03-02_loops.html">
     3.1. Introduction to Loops
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_03-03_conditionals.html">
     3.2. Conditionals
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01_intro/01_04-01_intro.html">
   4. Formal Coding: Functions, Classes, and Libraries
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_04-02_functions.html">
     4.1. Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_04-03_classes.html">
     4.2. Classes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_04-04_libraries.html">
     4.3. Libraries in Python
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01_intro/01_05-01_intro.html">
   5. Formal Coding: Functions, Classes, and Libraries
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_05-02_texts.html">
     5.1. Working with Textual Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_05-03_json.html">
     5.2. Working with JSON Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_05-04_multiple_files.html">
     5.3. Working with Multiple Files
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01_intro/01_06-01_intro.html">
   6. Working with Data on the Web
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_06-02_html.html">
     6.1. Introduction to HTML
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_intro/01_06-03_scraping_pages.html">
     6.2. Scraping Web Pages with Requests and BeautifulSoup
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  PART TWO: Data Analysis with Pandas (Work in Progress)
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02_pandas/02_01_01_intro.html">
   1. Introduction to Pandas
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_01_02_introduction_to_pandas.html">
     1.1. Introduction to Pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_01_03_the_basics.html">
     1.2. The Basics of Pandas
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02_pandas/02_02_01_intro.html">
   2. Working with Data in Pandas
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_02_02_finding_data.html">
     2.1. Finding Data in DataFrame
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_02_03_organizing_data.html">
     2.2. Organizing the DataFrame
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_02_04_cleaning_data.html">
     2.3. Cleaning the DataFrame
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02_pandas/02_03_01_intro.html">
   3. Searching for Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_03_02_advanced_strings.html">
     3.1. Advanced Searching on Strings
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_03_03_advanced_querying.html">
     3.2. Filter and Querying
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_03_04_advanced_grouping.html">
     3.3. Grouping with Groupby()
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02_pandas/02_04_01_intro.html">
   4. Advanced Pandas
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_04_02_pandas_and_plots.html">
     4.1. Plotting Data with Pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_04_03_graphing_networks_with_pandas.html">
     4.2. Graphing Network Data with Pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_pandas/02_04_04_time_series_data.html">
     4.3. Time Series Data
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  PART THREE: Natural Language Processing with spaCy
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03_spacy/03_01_01_intro.html">
   1. Introduction to spaCy
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_01_02_install_and_containers.html">
     1.1. The Basics of spaCy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_01_03_linguistic_annotations.html">
     1.2. Getting Started with spaCy and its Linguistic Annotations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_01_04_pipelines.html">
     1.3. spaCy’s Pipelines
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03_spacy/03_02_01_intro.html">
   2. Rules-Based spaCy
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_02_02_entityruler.html">
     2.1. The EntityRuler
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_02_03_matcher.html">
     2.2. The Matcher
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_02_04_phrase_matcher.html">
     2.3. The PhraseMatcher
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_02_06_simple_regex.html">
     2.4. Using RegEx with spaCy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_02_07_complex_regex.html">
     2.5. Working with Multi-Word Token Entities and RegEx in spaCy 3
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03_spacy/03_03_01_intro.html">
   3. Solving a Domain-Specific Problem: A Case Study with Holocaust NER
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_03_02_cultivating_concentration_camp_dataset.html">
     3.1. Cultivating Good Datasets for Entities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_03_03_challenges.html">
     3.2. The Challenges of Holocaust NER
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_spacy/03_03_04_building_holocaust_pipeline_rules_based.html">
     3.3. Creating Rules-Based Pipeline for Holocaust Documents
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  PART FOUR: OTHER APPLICATIONS OF PYTHON
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="04_01_01_intro.html">
   1. Topic Modeling in Python
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="04_01_02_topic_modeling_concepts.html">
     1.1. What is Topic Modeling?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_01_03_clusters.html">
     1.2. Topics and Clusters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_01_04_bigrams.html">
     1.3. Bigrams and Trigrams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_02_02_lda_concept.html">
     1.4. LDA Topic Modeling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_02_06_lda.html">
     1.5. Creating LDA in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_03_03_embedding_clustering.html">
     1.6. Transformer Models
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     1.7. Top2Vec in Python
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../08_booknlp/01_01_intro.html">
   2. Text Analysis with BookNLP
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../08_booknlp/01_intro.html">
     2.1. Introduction to BookNLP
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08_booknlp/02_starting.html">
     2.2. Getting Started with BookNLP
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08_booknlp/03_files.html">
     2.3. The Output Files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08_booknlp/04_character_analysis.html">
     2.4. Character Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08_booknlp/05_events.html">
     2.5. Events Analysis
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../06_sna/06_01_01_intro.html">
   3. Social Network Analysis
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../06_sna/06_01_02_basics.html">
     3.1. The Basic Concepts of Social Network Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06_sna/06_01_03_networkx.html">
     3.2. Introduction to NetworkX
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06_sna/06_01_04_pyvis_basics.html">
     3.3. Producing Dynamic Graphs with PyVis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06_sna/06_01_05_networkx_pyvis.html">
     3.4. NetworkX and PyVis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06_sna/06_01_06_node_color.html">
     3.5. Adding Color to Nodes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06_sna/06_01_07_applied.html">
     3.6. SNA on Humanities Data
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  PART FIVE: DESIGNING AN APPLICATION WITH STREAMLIT
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05_streamlit/05_01_01_intro.html">
   1. Introduction to Streamlit
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_01_02_streamlit.html">
     1.1. Creating Our First App
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_01_03_displaying_data.html">
     1.2. Displaying Data in Streamlit
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_01_04_input_widgets.html">
     1.3. Streamlit Input Widgets
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05_streamlit/05_02_01_intro.html">
   2. Advanced Streamlit Features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
  <label for="toctree-checkbox-18">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_02_02_charts.html">
     2.1. Data Visualization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_02_03_layout_design.html">
     2.2. Layout Design
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_02_04_cache.html">
     2.3. Streamlit Cache and Session States
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_02_05_custom_html.html">
     2.5. Custom HTML
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_02_06_multiple_pages.html">
     2.6. Multi-Page Applications
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05_streamlit/05_03_01_intro.html">
   3. Building a Database Query Application
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
  <label for="toctree-checkbox-19">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_03_02_database_query_app.html">
     3.1. Building a Database Query Application
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_streamlit/05_03_03_cloud.html">
     3.2. Deploying an App in the Cloud with Streamlit Share
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/wjbmattingly/python_for_dh/main?urlpath=tree/04_topic_modeling/04_03_04_top2vec.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://colab.research.google.com/github/wjbmattingly/python_for_dh/blob/main/04_topic_modeling/04_03_04_top2vec.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Colab"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="headerbtn__text-container">Colab</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/wjbmattingly/python_for_dh"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/wjbmattingly/python_for_dh/issues/new?title=Issue%20on%20page%20%2F04_topic_modeling/04_03_04_top2vec.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/wjbmattingly/python_for_dh/edit/main/04_topic_modeling/04_03_04_top2vec.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/04_topic_modeling/04_03_04_top2vec.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-top2vec-model">
   1.7.1. Creating a Top2Vec Model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analyzing-our-topic-model">
   1.7.2. Analyzing our Topic Model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#working-with-bigrams-and-trigrams">
   1.7.3. Working with Bigrams and Trigrams
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#saving-and-loading-a-top2vec-model">
   1.7.4. Saving and Loading a Top2Vec Model
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Top2Vec in Python</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-top2vec-model">
   1.7.1. Creating a Top2Vec Model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analyzing-our-topic-model">
   1.7.2. Analyzing our Topic Model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#working-with-bigrams-and-trigrams">
   1.7.3. Working with Bigrams and Trigrams
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#saving-and-loading-a-top2vec-model">
   1.7.4. Saving and Loading a Top2Vec Model
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="top2vec-in-python">
<h1><span class="section-number">1.7. </span>Top2Vec in Python<a class="headerlink" href="#top2vec-in-python" title="Permalink to this headline">#</a></h1>
<p>Now that we understand the primary concepts behind leveraging transformers and sentence embeddings to perform topic modeling, let’s examine a key library and making this entire workflow simplified with just a single line of Python. That library is Top2Vec.</p>
<p>Unlike a traditional topic modeling approach or even the manual approach with transformers that we saw in the previous section, Top2Vec will embed not only all the sentences, but all the words used in your corpus. In addition to this, it will also embed the topics themselves. This means that words, documents, and topics all occupy the same higher-dimensional space. On the surface, this may not seem that important, but it allows us to understand the relationship between three interconnected pieces of the process in topic modeling mathematically. This means, for example, Top2Vec let’s us know the mathematical similarity between a given word and a document or a topic in general. Understanding these relationships lets us understand broader patterns in our topics that may otherwise be missed.</p>
<p>That said, Top2Vec does have several drawbacks. First, it will produce a high number of outliers. These are documents that do not fit neatly into any one topic. Top2Vec has a rather unique way of handling outliers, however. It generate an embedding for the topics 0 and above and then assign outliers to their nearest topic embedding. This means that outliers may be quite pronounced for certain topics. For some workflows, this may not be an issue. Second, Top2Vec can produce results that are occasionally difficult to understand. Certain topics may not seem to have any coherency. This is common in all approaches to topic modeling, however.</p>
<p>In order to model our data, we once again need to load it. Again, we will use pandas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/wjbmattingly/bap_sent_embedding/main/data/vol7.json&quot;</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>names</th>
      <th>descriptions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>AARON, Thabo Simon</td>
      <td>An ANCYL member who was shot and severely inju...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ABBOTT, Montaigne</td>
      <td>A member of the SADF who was severely injured ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ABDUL WAHAB, Zakier</td>
      <td>A member of QIBLA who disappeared in September...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ABRAHAM, Nzaliseko Christopher</td>
      <td>A COSAS supporter who was kicked and beaten wi...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ABRAHAMS, Achmat Fardiel</td>
      <td>Was shot and blinded in one eye by members of ...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>21742</th>
      <td>ZWENI, Ernest</td>
      <td>One of two South African Police (SAP) members ...</td>
    </tr>
    <tr>
      <th>21743</th>
      <td>ZWENI, Lebuti</td>
      <td>An ANC supporter who was shot dead by a named ...</td>
    </tr>
    <tr>
      <th>21744</th>
      <td>ZWENI, Louis</td>
      <td>Was shot dead in Tokoza, Transvaal, on 22 May ...</td>
    </tr>
    <tr>
      <th>21745</th>
      <td>ZWENI, Mpantesa William</td>
      <td>His home was lost in an arson attack by Witdoe...</td>
    </tr>
    <tr>
      <th>21746</th>
      <td>ZWENI, Xolile Milton</td>
      <td>A Transkei Defence Force (TDF) soldier who was...</td>
    </tr>
  </tbody>
</table>
<p>21747 rows × 2 columns</p>
</div></div></div>
</div>
<p>Once again, we will convert all our descriptions into a single list of documents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">docs</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">descriptions</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">docs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;An ANCYL member who was shot and severely injured by SAP members at Lephoi, Bethulie, Orange Free State (OFS) on 17 April 1991. Police opened fire on a gathering at an ANC supporter&#39;s house following a dispute between two neighbours, one of whom was linked to the ANC and the other to the SAP and a councillor.&quot;
</pre></div>
</div>
</div>
</div>
<section id="creating-a-top2vec-model">
<h2><span class="section-number">1.7.1. </span>Creating a Top2Vec Model<a class="headerlink" href="#creating-a-top2vec-model" title="Permalink to this headline">#</a></h2>
<p>Now that we have our data, we can get started with Top2Vec. First, you will need to install the library onto your system. In order to do this, you can use <code class="docutils literal notranslate"><span class="pre">pip</span></code> with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">top2vec</span>
</pre></div>
</div>
<p>This will install Top2Vec as well as all its dependencies. Once it is installed, you will be able to import the Top2Vec class with the following line:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">top2vec</span> <span class="kn">import</span> <span class="n">Top2Vec</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/wjbmattingly/anaconda3/envs/python-textbook/lib/python3.9/site-packages/tqdm/auto.py:22: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html
  from .autonotebook import tqdm as notebook_tqdm
</pre></div>
</div>
</div>
</div>
<p>Once we have imported the Top2Vec class, we can create our Top2Vec topic model with just one line of Python. We can pass many key word arguments to our Top2Vec class, but the result from the default settings is usually quite good. It may take several minutes or even hours to run the code below, depending on your system requirements.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">Top2Vec</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2022-11-13 13:58:09,857 - top2vec - INFO - Pre-processing documents for training
2022-11-13 13:58:11,379 - top2vec - INFO - Creating joint document/word embedding
2022-11-13 13:58:53,163 - top2vec - INFO - Creating lower dimension embedding of documents
2022-11-13 13:59:16,683 - top2vec - INFO - Finding dense areas of documents
2022-11-13 13:59:18,018 - top2vec - INFO - Finding topics
</pre></div>
</div>
</div>
</div>
</section>
<section id="analyzing-our-topic-model">
<h2><span class="section-number">1.7.2. </span>Analyzing our Topic Model<a class="headerlink" href="#analyzing-our-topic-model" title="Permalink to this headline">#</a></h2>
<p>Once our Top2Vec topic model has finished training, we can then analyze the results. A good first step is to analyze the topic sizes. We can do so with the model <code class="docutils literal notranslate"><span class="pre">.get_topic_sizes()</span></code>. This method will return a list of two lists: the size of each topic and its number.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_sizes</span><span class="p">,</span> <span class="n">topic_nums</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_topic_sizes</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We can better understand these results by zipping the two lists together and iterating over the first five topics to see how large they are.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">topic_size</span><span class="p">,</span> <span class="n">topic_num</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">topic_sizes</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span> <span class="n">topic_nums</span><span class="p">[:</span><span class="mi">5</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Topic Num </span><span class="si">{</span><span class="n">topic_num</span><span class="si">}</span><span class="s2"> has </span><span class="si">{</span><span class="n">topic_size</span><span class="si">}</span><span class="s2"> documents.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Topic Num 0 has 763 documents.
Topic Num 1 has 346 documents.
Topic Num 2 has 247 documents.
Topic Num 3 has 232 documents.
Topic Num 4 has 231 documents.
</pre></div>
</div>
</div>
</div>
<p>Notice that the higher number the topic number, the smaller the quantity of documents. This is because Top2Vec organizes the topics by size.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">.get_topics()</span></code> method to extract information about our topics from the model. This will take one argument, the quantity of topics you want to examine. It will return 3 items: a list of words for each topic, a list of word scores for each list, and a list of the topic numbers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_words</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">,</span> <span class="n">topics</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_topics</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s now examine the data for topic 1.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">words</span><span class="p">,</span> <span class="n">scores</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">topic_words</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">word_scores</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">topics</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Topic </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">scores</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Topic 1
matlala 0.8607659
bk 0.8543051
gamatlala 0.8241883
proposed 0.794874
lebowa 0.74230933
resisted 0.67116654
independence 0.65576303
africa 0.6098439
chief 0.49963036
she 0.39457357
because 0.3908882
goederede 0.36000514
february 0.3470583
mahlangu 0.34650403
home 0.34591654
down 0.34060025
south 0.33364677
dennilton 0.3321176
burnt 0.32735756
would 0.3133811
supported 0.31247702
incorporation 0.3080003
stolen 0.28846616
from 0.28013867
had 0.27430868
it 0.2732216
lost 0.2716071
kwandebele 0.266503
congress 0.26175743
allegedly 0.25916496
supporters 0.25534543
village 0.25463325
her 0.25239387
mr 0.2508838
homeland 0.24748528
spite 0.24678819
about 0.24613273
maboloko 0.24536304
resulted 0.24119411
into 0.24059604
opposed 0.23594634
pietersburg 0.23558588
alleged 0.22179778
possessions 0.21927707
many 0.21916199
house 0.21861681
imbokodo 0.21361831
leeuwfontein 0.21190558
tribal 0.21142614
zeerust 0.21082786
</pre></div>
</div>
</div>
</div>
<p>This gives us a word list of 50 words most closely associated with <code class="docutils literal notranslate"><span class="pre">Topic</span> <span class="pre">1</span></code>. Each word has a score. Remember, words, documents, and topics all occupy the same higher-dimensional space. This is an example of this advantage in practice. We are able to calculate the degree to which a word is relevant to a topic because of its proximity to the center of a topic. The higher the score, the closer a word is to a topic’s center and, therefore, in theory more closely represents that cluster.</p>
<p>We can also use the <code class="docutils literal notranslate"><span class="pre">search_documents_by_topic()</span></code> method to learn about the documents that reside within a topic. This method takes two arguments: <code class="docutils literal notranslate"><span class="pre">topic_num</span></code> (the number of the topic you wish to examine) and <code class="docutils literal notranslate"><span class="pre">num_docs</span></code> (the number of documents you want to return). This method will return three things: the documents, the scores, or the degree to which they represent the topic, and their unique ids.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">documents</span><span class="p">,</span> <span class="n">document_scores</span><span class="p">,</span> <span class="n">document_ids</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">search_documents_by_topic</span><span class="p">(</span><span class="n">topic_num</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_docs</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now that we have our data, we can iterate them all simultaneously with the example provided in the Top2Vec README on GitHub.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">doc</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">doc_id</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> <span class="n">document_scores</span><span class="p">,</span> <span class="n">document_ids</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Document: </span><span class="si">{</span><span class="n">doc_id</span><span class="si">}</span><span class="s2">, Score: </span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----------&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----------&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Document: 15060, Score: 0.9702943563461304
-----------
An ANC supporter who had her house burnt down by IFP supporters in Sonkombo, Ndwedwe, KwaZulu, near Durban, on 16 March 1994. See Sonkombo arson attacks. 
-----------

Document: 5686, Score: 0.965286374092102
-----------
She lost her house in Sonkombo, Ndwedwe, KwaZulu, near Durban, in an arson attack by IFP supporters on 16 March 1994. See Sonkombo arson attacks.
-----------

Document: 21471, Score: 0.9650641083717346
-----------
An ANC supporter whose house was burnt down by IFP supporters in Sonkombo, Ndwedwe, KwaZulu, near Durban, on 16 March 1994. See Sonkombo arson attacks. 
-----------

Document: 2957, Score: 0.9647031426429749
-----------
His home was burnt down by IFP supporters on 16 March 1994 at Sonkombo, Ndwedwe, KwaZulu, near Durban, in intense political conflict in the area. See Sonkombo arson attacks.
-----------

Document: 714, Score: 0.9634069204330444
-----------
An ANC supporter who had her home burnt down by IFP supporters at Sonkombo, Ndwedwe, KwaZulu, near Durban, on 16 March 1994. See Sonkombo arson attacks.
-----------

Document: 9855, Score: 0.9628040194511414
-----------
He had his house burnt down by IFP supporters in Sonkombo, Ndwedwe, KwaZulu, near Durban, on 16 March 1994. See Sonkombo arson attacks. 
-----------

Document: 759, Score: 0.9617692232131958
-----------
Had her home burnt down by IFP supporters at Sonkombo, Ndwedwe, KwaZulu, near Durban, on 16 March 1994. See Sonkombo arson attacks.
-----------

Document: 519, Score: 0.9617335796356201
-----------
An ANC supporter who had her house burnt down by IFP supporters on 16 March 1994 at Sonkombo, Ndwedwe, KwaZulu, near Durban, in intense political conflict in the area. See Sonkombo arson attacks.
-----------

Document: 3424, Score: 0.9609926342964172
-----------
An ANC supporter whose home was burnt down by IFP supporters on 20 March 1994 at Sonkombo, Ndwedwe, KwaZulu, near Durban. See Sonkombo arson attacks.
-----------

Document: 12659, Score: 0.9603915810585022
-----------
An ANC supporter who had her house burnt down by IFP supporters in Sonkombo, Ndwedwe, KwaZulu, near Durban, on 20 March 1994. See Sonkombo arson attacks. 
-----------
</pre></div>
</div>
</div>
</div>
<p>These results are good. These are all individuals who have near identical descriptions in the TRC Volume 7 Final Report. In other words, Top2Vec has clearly isolated documents of identical or overlapping similarity.</p>
</section>
<section id="working-with-bigrams-and-trigrams">
<h2><span class="section-number">1.7.3. </span>Working with Bigrams and Trigrams<a class="headerlink" href="#working-with-bigrams-and-trigrams" title="Permalink to this headline">#</a></h2>
<p>Top2Vec also wraps around the Gensim library and allows users to automatically create bigrams and trigrams. We can initiate this process by setting the keyword argument <code class="docutils literal notranslate"><span class="pre">ngram_vocba</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_ngram</span> <span class="o">=</span> <span class="n">Top2Vec</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">ngram_vocab</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2022-11-13 13:59:18,293 - top2vec - INFO - Pre-processing documents for training
2022-11-13 13:59:19,889 - top2vec - INFO - Creating joint document/word embedding
2022-11-13 14:00:07,661 - top2vec - INFO - Creating lower dimension embedding of documents
2022-11-13 14:00:19,175 - top2vec - INFO - Finding dense areas of documents
2022-11-13 14:00:19,748 - top2vec - INFO - Finding topics
</pre></div>
</div>
</div>
</div>
<p>Now that we have our <code class="docutils literal notranslate"><span class="pre">model_ngram</span></code> trained, let’s explore topic 1 once again.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_sizes_ngram</span><span class="p">,</span> <span class="n">topic_nums_ngram</span> <span class="o">=</span> <span class="n">model_ngram</span><span class="o">.</span><span class="n">get_topic_sizes</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_words_ngram</span><span class="p">,</span> <span class="n">word_scores_ngram</span><span class="p">,</span> <span class="n">topics_ngram</span> <span class="o">=</span> <span class="n">model_ngram</span><span class="o">.</span><span class="n">get_topics</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">for</span> <span class="n">words</span><span class="p">,</span> <span class="n">scores</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">topic_words_ngram</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">word_scores_ngram</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">topics_ngram</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Topic </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">scores</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Topic 1
island 0.7406236
imprisonment 0.7383562
years 0.7350636
robben 0.73397404
half years 0.7247492
years imprisonment 0.7206887
sentenced 0.6986825
served 0.695978
arrested 0.66353947
charged 0.66336066
banned 0.66275764
imprisoned 0.6580816
five years 0.6498868
suspended sentence 0.6363463
prison sentence 0.6340719
trial 0.6326254
sentence 0.62952983
activist 0.6273678
months 0.62542427
detained 0.6249351
prison 0.6236554
until 0.6223862
poqo 0.6147149
custody 0.6120131
year sentence 0.6114016
held 0.6040434
worcester 0.60011864
pac 0.5935757
released 0.5893775
poqo activities 0.58773917
charges 0.5808439
zwelethemba worcester 0.57607645
zweletemba worcester 0.575092
arrest 0.5745207
robben island 0.571052
under 0.56998795
worcester cape 0.56770444
detention 0.5670366
with public 0.56048626
ashton 0.55939454
later acquitted 0.5478358
tortured 0.5445701
charged with 0.54265773
act 0.5392955
interrogation 0.5369543
without 0.53288996
paarl 0.53190106
public 0.5305038
prison paarl 0.5296649
year prison 0.5292457
</pre></div>
</div>
</div>
</div>
<p>It is important to note that this Topic 1 is entirely different from the Topic 1 of our first model as both the initialization of the process is random and the data used for embedding documents is also altered (because we are accepting bigrams). Our data does reflect a deeper representation of our corpus. <code class="docutils literal notranslate"><span class="pre">Prison</span> <span class="pre">sentence</span></code>, for example, is a collective word that has a distinct meaning.</p>
</section>
<section id="saving-and-loading-a-top2vec-model">
<h2><span class="section-number">1.7.4. </span>Saving and Loading a Top2Vec Model<a class="headerlink" href="#saving-and-loading-a-top2vec-model" title="Permalink to this headline">#</a></h2>
<p>Once we have a model that we are happy with, we can save it using the <code class="docutils literal notranslate"><span class="pre">save()</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_ngram</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;../data/top2vec_ngram&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Likewise, we can load up our previous model with <code class="docutils literal notranslate"><span class="pre">load()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">new_model</span> <span class="o">=</span> <span class="n">Top2Vec</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;../data/top2vec_ngram&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>And for good measure we can run the same code as above to print off our bigrams once again.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_words_ngram</span><span class="p">,</span> <span class="n">word_scores_ngram</span><span class="p">,</span> <span class="n">topics_ngram</span> <span class="o">=</span> <span class="n">new_model</span><span class="o">.</span><span class="n">get_topics</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">for</span> <span class="n">words</span><span class="p">,</span> <span class="n">scores</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">topic_words_ngram</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">word_scores_ngram</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">topics_ngram</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Topic </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">scores</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Topic 1
island 0.7406236
imprisonment 0.7383562
years 0.7350636
robben 0.73397404
half years 0.7247492
years imprisonment 0.7206887
sentenced 0.6986825
served 0.695978
arrested 0.66353947
charged 0.66336066
banned 0.66275764
imprisoned 0.6580816
five years 0.6498868
suspended sentence 0.6363463
prison sentence 0.6340719
trial 0.6326254
sentence 0.62952983
activist 0.6273678
months 0.62542427
detained 0.6249351
prison 0.6236554
until 0.6223862
poqo 0.6147149
custody 0.6120131
year sentence 0.6114016
held 0.6040434
worcester 0.60011864
pac 0.5935757
released 0.5893775
poqo activities 0.58773917
charges 0.5808439
zwelethemba worcester 0.57607645
zweletemba worcester 0.575092
arrest 0.5745207
robben island 0.571052
under 0.56998795
worcester cape 0.56770444
detention 0.5670366
with public 0.56048626
ashton 0.55939454
later acquitted 0.5478358
tortured 0.5445701
charged with 0.54265773
act 0.5392955
interrogation 0.5369543
without 0.53288996
paarl 0.53190106
public 0.5305038
prison paarl 0.5296649
year prison 0.5292457
</pre></div>
</div>
</div>
</div>
<p>If you are working with topic modeling or just want to get a general sense of how your documents align in a large corpus, then Top2Vec is a great solution to your situation. It offers a lot of features for a single line of code. There are other options available that do similar things, notable BerTopic. One should never rely on a single topic modeling approach, nor should one rest arguments heavily upon the results. Topic modeling, regardless of method, is imperfect. It is, however, a great way to explore your data and begin finding patterns that you may otherwise not notice.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./04_topic_modeling"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="04_03_03_embedding_clustering.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">1.6. </span>Transformer Models</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../08_booknlp/01_01_intro.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">2. </span>Text Analysis with BookNLP</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By William J.B. Mattingly<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>